
<form [formGroup]="form" [formGroup]="imagenForm" [formGroup]="translateForm" [formGroup]="coordinatesForm" [formGroup]="audioguidesForm" [formGroup]="descriptionForm"
(ngSubmit)="onSubmit()" *ngIf=poi>

  <mat-tab-group fxFlex.gt-md="100" fxFlex="100" mat-stretch-tabs>
    <mat-tab label="Basic information">

        <div fxLayoutAlign="center center" id="container" fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap="5%">
    
            <mat-card fxLayout.gt-md="row" fxLayout="column" fxFlex.gt-sm="70" fxFlex="100" fxLayoutGap="2%">
        
              <div fxFlex.gt-md="25" fxFlex="100" fxLayout="column" fxLayoutGap="5%">

                <!-- Coordenadas google maps  -->
                <div>
                  <mat-form-field fxLayoutAlign="center center">
                    <input matInput placeholder="Latitude" type="text" [formControl]="coordinatesForm.controls['lat']"
                    required>
                  </mat-form-field>

                  <mat-form-field fxLayoutAlign="center center">
                    <input matInput placeholder="Longitude" type="text" [formControl]="coordinatesForm.controls['lng']"
                      required>
                  </mat-form-field>

                  <!--<mat-form-field fxLayoutAlign="center center">
                      <input matInput placeholder="status" type="text" [formControl]="form.controls['status']" required>
                  </mat-form-field>-->
                  
                  <div fxLayoutAlign="center center">
                    <mat-select [formControl]="form.controls['status']" class="status-width" placeholder="status" required>
                      <mat-option *ngFor="let status of statusList" value="{{status}}">
                        {{ status }}
                      </mat-option>
                    </mat-select>
                  </div>

                  <mat-form-field fxLayoutAlign="center center">
                    <textarea matInput placeholder="schedule" type="text" [formControl]="form.controls['schedule']" required></textarea>
                  </mat-form-field>

                </div>

              </div>
              
              <div fxFlex.gt-md="75" fxFlex="100">

                    <mat-form-field class="w-100">
                      <input matInput placeholder="Name" type="text" [formControl]="form.controls['name']" required>
                    </mat-form-field>
                    
                    <mat-form-field class="w-50, margin-right">
                        <input matInput placeholder="Autor" type="text" [formControl]="form.controls['creator']" readonly>
                    </mat-form-field>

                    <mat-form-field width="30%">
                        <input matInput placeholder="price" type="number" [formControl]="form.controls['price']">
                    </mat-form-field>

                    <div>
                      <!-- Categorías -->
                      <mat-form-field class="w-50, margin-right">
                        <mat-select placeholder="Categories" [formControl]="form.controls['categories']" multiple>
                          <mat-option *ngFor="let c of allCategories?.rows" [value]="c.id">{{c.name}}</mat-option>
                        </mat-select>
                      </mat-form-field>
                      <!-- Autor/Anyo -->
                      
                      <mat-form-field width="30%">
                        <input matInput placeholder="Year" type="number" [formControl]="form.controls['year']" required>
                      </mat-form-field>

                    </div>
                  
                    <!-- Descripción con librería -->
                    <!--<quill-editor [formControl]="descriptionForm.controls['originalDescription']" required>
                      <div quill-editor-toolbar>
                        <span class="ql-formats">
                          <button class="ql-bold" [title]="'Bold'"></button>
                          <button class="ql-italic" [title]="'italic'"></button>
                          <button class="ql-underline" [title]="'underline'"></button>
                          <button class="ql-strike" [title]="'strike'"></button>
                        </span>
                        <span class="ql-formats">
                          <button class="ql-list" value="ordered" [title]="'Ordered List'"></button>
                          <button class="ql-list" value="bullet" [title]="'Dots List'"></button>
                        </span>
                        <span class="ql-formats">
                          <select class="ql-align" [title]="'Aligment'">
                            <option selected></option>
                            <option value="center"></option>
                            <option value="right"></option>
                            <option value="justify"></option>
                          </select>
                        </span>
                      </div>
                    </quill-editor> -->              
              </div>
              
            </mat-card>
        </div>
    </mat-tab>
      
    <mat-tab label="Translations">
      <div fxLayoutAlign="center center" id="container" fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap="5%">
  
          <mat-card fxLayout.gt-md="row" fxLayout="column" fxFlex.gt-sm="70" fxFlex="100" fxLayoutGap="2%">
      
            
            <div fxFlex.gt-md="100" fxFlex="100">

                  <div>
                    <!-- Idiomas -->
                    <mat-form-field class="w-100">
                      <mat-select placeholder="Language" name="language" [formControl]="translateForm.controls['languageSelected']" (selectionChange)="translateChange($event)"><!-- [formControl]="form.controls['categories']" -->
                        <mat-option *ngFor="let language of languages.rows" [value]="language.id"><!-- [(ngModel)]="selectedLanguage" (change)="translateChange($event)" -->
                          {{language.name}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    
                  </div>
                
                  <!-- Descripción con librería -->
                  <quill-editor required [formControl]="translateForm.controls['translateDescripcion']"><!-- [formControl]="descriptionForm.controls['originalDescription']" -->
                    <div quill-editor-toolbar>
                      <span class="ql-formats">
                        <button class="ql-bold" [title]="'Bold'"></button>
                        <button class="ql-italic" [title]="'italic'"></button>
                        <button class="ql-underline" [title]="'underline'"></button>
                        <button class="ql-strike" [title]="'strike'"></button>
                      </span>
                      <span class="ql-formats">
                        <button class="ql-list" value="ordered" [title]="'Ordered List'"></button>
                        <button class="ql-list" value="bullet" [title]="'Dots List'"></button>
                      </span>
                      <span class="ql-formats">
                        <select class="ql-align" [title]="'Aligment'">
                          <option selected></option>
                          <option value="center"></option>
                          <option value="right"></option>
                          <option value="justify"></option>
                        </select>
                      </span>
                    </div>
                  </quill-editor>
              
                
            </div>
            
          </mat-card>
      </div>
  </mat-tab>

    <mat-tab label="Images">
        <div fxLayoutAlign="center center" id="container" fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap="5%">
    
            <mat-card fxLayout.gt-md="row" fxLayout="column" fxFlex.gt-sm="70" fxFlex="100" fxLayoutGap="2%">
        
              <div fxFlex.gt-md="100" fxFlex="100" fxLayout="column" fxLayoutGap="5%"> 
                <div>
                    <!-- Subir archivos -->
                    <div id="uploadContent" class="w-100" *ngIf="poi.images.length<3">
                      <input type="file" name="photo" (change)="onImageSelect($event)" multiple accept="image/*"/>
                      <p>Drag your images here or click in this area.</p>
                    </div>
                    <div fxLayout="row wrap" fxLayoutGap="2px" style="margin-top: 10px">
                      <div *ngFor="let i of urlImage">
                        <input type="radio" class="radio-item" [value]="i" name="item" id="radio{{urlImage.indexOf(i)}}" [formControl]="form.controls['coverImage']">
                        <label class="label_item" for="radio{{urlImage.indexOf(i)}}" [style.background-image]="'url(' + loadImages(i) + ')'">
                          <a mat-icon-button class="imgButtonChoose" (click)="selectAsCover(i)">
                            <mat-icon>flag</mat-icon>
                          </a>
                          <a mat-icon-button class="imgButtonDelete" (click)="deleteImage(i)">
                              <mat-icon>cancel</mat-icon>
                            </a>
                          </label>
                          <p *ngIf="comprobarImagen(i)">Portada</p>
                      </div>
                    </div>
                  </div>   
              </div>
            </mat-card>
        </div>
    </mat-tab>
      
    <mat-tab label="Audioguides">
      
        <div fxLayoutAlign="center center" id="container" fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap="5%">
    
            <mat-card fxLayout.gt-md="row" fxLayout="column" fxFlex.gt-sm="70" fxFlex="100" fxLayoutGap="2%">
        
              <div fxFlex.gt-md="100" fxFlex="100" fxLayout="column" fxLayoutGap="5%"> 

                    <h3>Audioguides</h3>
                    <div>
                      <!-- Idiomas -->
                      <mat-form-field class="w-100">
                        <mat-select placeholder="Language" name="language" [formControl]="audioguidesForm.controls['languageSelected']" (selectionChange)="audioChange($event)"><!-- [formControl]="form.controls['categories']" -->
                          <mat-option *ngFor="let language of languages.rows" [value]="language.id"><!-- [(ngModel)]="selectedLanguage" (change)="translateChange($event)" -->
                            {{language.name}}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      
                    </div>
                    <div *ngIf="!this.audioguidesForm.controls['translatedFile'].value" id="uploadContent" class="w-100" style="height: 50px; margin-bottom: 5px">
                      <input type="file" name="audio" (change)="onAudioSelect($event)" accept="audio/*" />
                      <p style="margin-top: -38px">Drag & Drop or click to upload</p>
                    </div>
                    <div id="divAudio">
                      <audio *ngIf="this.audioguidesForm.controls['translatedFile'].value != ''"   controls [src]="loadImages(this.audioguidesForm.controls['translatedFile'].value)"></audio>
                       <a id="deleteAudio" mat-icon-button *ngIf="this.audioguidesForm.controls['translatedFile'].value" class="audButtonDelete" (click)="deleteAudio(this.audioguidesForm.controls['translatedFile'].value , this.audioguidesForm.controls['languageSelected'].value )">
                         <mat-icon>cancel</mat-icon>
                       </a>
                    </div>
              </div>
            </mat-card>
        </div>
    </mat-tab>
  </mat-tab-group>
  
  <button mat-fab id="addFloatingButton" type="submit" [disabled]="!form.valid ||!coordinatesForm.valid || !audioguidesForm.valid">
    <mat-icon>send</mat-icon>
  </button>
  
</form>



<!--
<form [formGroup]="form" [formGroup]="coordinatesForm" [formGroup]="audioguidesForm" [formGroup]="descriptionForm"
  (ngSubmit)="onSubmit()" *ngIf=poi>
  <div id="container" fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap="5%" *ngIf="poi">
    <mat-card fxLayout.gt-md="row" fxLayout="column" fxFlex.gt-sm="80" fxFlex="100" fxLayoutGap="2%">
      <div fxFlex.gt-md="50" fxFlex="100" fxLayout="column" fxLayoutGap="5%">
        <div>
           Subir archivos 
          <div id="uploadContent" class="w-100">
            <input type="file" name="photo" (change)="ImgUpload($event)" multiple accept="image/*" />
            <p>Drag your images here or click in this area.</p>
          </div>
          <div fxLayout="row wrap" fxLayoutGap="2px" style="margin-top: 10px">
            <div *ngFor="let i of urlImage">
              <input type="radio" class="radio-item" [value]="i" name="item" id="radio{{urlImage.indexOf(i)}}" [formControl]="form.controls['coverImage']">
              <label class="label_item" for="radio{{urlImage.indexOf(i)}}" [style.background-image]="'url(' + i + ')'">
                  <a mat-icon-button class="imgButtonDelete" (click)="removeImage(i)">
                    <mat-icon>cancel</mat-icon>
                  </a>
                </label>
            </div>
          </div>
        </div>
         Coordenadas google maps  
        <div>
          <mat-form-field class="w-50">
            <input matInput placeholder="Latitude" type="text" [formControl]="coordinatesForm.controls['lat']" required>
          </mat-form-field>
          <mat-form-field class="w-50">
            <input matInput placeholder="Longitude" type="text" [formControl]="coordinatesForm.controls['lng']"
              required>
          </mat-form-field>
        </div>
        <COMENTADO <div>
          <mat-form-field class="w-100">
            <input matInput ngx-google-places-autocomplete type="text" placeholder="Site name" #placesRef="ngx-places"
              (onAddressChange)="handleAddressChange($event)" />
          </mat-form-field>
        </div> COMENTADO>
      </div>
      <div fxFlex.gt-md="50" fxFlex="100">
        <mat-form-field class="w-100">
          <input matInput placeholder="Name" type="text" [formControl]="form.controls['name']" required>
        </mat-form-field>
        <hr>
       Categorías 
        <mat-form-field class="w-100">
          <mat-select placeholder="Categories" [formControl]="form.controls['categories']" multiple>
            <mat-option *ngFor="let c of allCategories?.rows" [value]="c.id">{{c.name}}</mat-option>
          </mat-select>
        </mat-form-field>
         Autor/Anyo 
        <mat-form-field class="w-50">
          <input matInput placeholder="Autor" type="text" [formControl]="form.controls['creator']">
        </mat-form-field>
        <mat-form-field class="w-50">
          <input matInput placeholder="Year" type="number" [formControl]="form.controls['year']" required>
        </mat-form-field>
         Descripción con librería 
        <quill-editor [formControl]="descriptionForm.controls['originalDescription']" required>
          <div quill-editor-toolbar>
            <span class="ql-formats">
              <button class="ql-bold" [title]="'Bold'"></button>
              <button class="ql-italic" [title]="'italic'"></button>
              <button class="ql-underline" [title]="'underline'"></button>
              <button class="ql-strike" [title]="'strike'"></button>
            </span>
            <span class="ql-formats">
              <button class="ql-list" value="ordered" [title]="'Ordered List'"></button>
              <button class="ql-list" value="bullet" [title]="'Dots List'"></button>
            </span>
            <span class="ql-formats">
              <select class="ql-align" [title]="'Aligment'">
                <option selected></option>
                <option value="center"></option>
                <option value="right"></option>
                <option value="justify"></option>
              </select>
            </span>
          </div>
        </quill-editor>
      </div>
    </mat-card>
    <div fxLayout="column" fxLayoutGap="5%" fxFlex.gt-sm="20" fxFlex="100">
      <mat-card>
         Precio, estado, horarios 
        <mat-form-field class="w-50">
          <input matInput placeholder="price" type="number" [formControl]="form.controls['price']">
        </mat-form-field>
        <mat-form-field class="w-50">
          <input matInput placeholder="status" type="text" [formControl]="form.controls['status']" required>
        </mat-form-field>
        <COMENTADO <mat-select [(ngModel)]="form.controls['status']" class="w-50" placeholder="status">
          <mat-option *ngFor="let status of statusList" value="{{status}}">
            {{ status }}
          </mat-option>
        </mat-select> COMENTADO>
        <mat-form-field class="w-100">
          <textarea matInput placeholder="schedule" type="text" [formControl]="form.controls['schedule']" required></textarea>
        </mat-form-field>
      </mat-card>
      <mat-card>
        <h3>Audioguides</h3>
        <div id="uploadContent" class="w-100" style="height: 50px; margin-bottom: 5px">
          <input type="file" name="audioguide" (change)="audioUpload($event)" accept="audio/*" />
          <p style="margin-top: -38px">Drag & Drop or click to upload</p>
        </div>
        <audio *ngIf="this.audioguidesForm.controls['originalFile'].value" controls (src)="this.audioguidesForm.controls['originalFile'].value"></audio>
      </mat-card>
    </div>
  </div>
  <button mat-fab id="addFloatingButton" type="submit" [disabled]="!form.valid ||!coordinatesForm.valid || !audioguidesForm.valid">
    <mat-icon>send</mat-icon>
  </button>
</form>
-->